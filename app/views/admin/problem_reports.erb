<div id="notice"></div>
<table border="1" cellpadding="5">
  <thead>
  <th>Exception</th>
  <th>Class</th>
  <th>Status</th>
  <th>Occured At</th>
  <th>Last Updated By</th>
  <th>Last Updated At</th>
  <th>Owned By</th>
  <th>Actions</th>
  </thead>
  <tbody>
  <% @problem_reports.each do |problem_report| %>
      <tr>
        <td><%= problem_report.exception_message %></td>
        <td><%= problem_report.exception_class %></td>
        <td><a href="#" id="problemReport_<%= problem_report.id %>"><%= problem_report.status %></a></td>
        <td><%= problem_report.created_at.strftime("%m/%d/%Y") %></td>
        <td><%= problem_report.last_updated_by_name %></td>
        <td><%= problem_report.updated_at.strftime("%m/%d/%Y") %></td>
        <td><%= problem_report.owner_name %></td>
        <td><a href="#">View Details</a></td>
      </tr>
  <% end %>
  </tbody>
</table>

<script type="text/javascript">
    $("[id^=problemReport_]").each(function (key) {
        $('#' + this.id).click(function (e) {
            e.preventDefault();
            toggleNextStatus(e.target.id);
        });
    });

    function toggleNextStatus(targetId){
        current_status = $('#' + targetId).html()
        if(current_status == 'open'){
            $('#' + targetId).html("in_progress")
        }
        else if(current_status == 'in_progress'){
            $('#' + targetId).html("closed")
        }
        else if(current_status == 'closed'){
            $('#' + targetId).html("open")
        }
    }
</script>