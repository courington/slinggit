<style type="text/css">
    tr.postResult {
        cursor: pointer;
    }
</style>

<% provide(:title, 'Search Results') %>
<h2>Search Results</h2>

<table class="table table-striped">
  <thead>
  <th>Image</th>
  <th>Item</th>
  <th>Description</th>
  <th>Price</th>
  <th>Location</th>
  <th>Status</th>
  </thead>
  <tbody>
  <% if not @posts.blank? %>
      <% @posts.each do |post| %>
          <tr class="postResult" id="postResult_<%= post.id %>">
            <td>
              <% if post.photo_file_name.blank? %>
                <%= image_tag "http://placehold.it/80x80" %>
              <% else %>
                <%= image_tag post.photo.url(:search) %>
              <% end %>
            </td>
            <td><%= post.hashtag_prefix.titleize %></td>
            <td><%= post.content %></td>
            <td>$<%= "%.0f" % post.price || "no description" %></td>
            <td><%= post.location %></td>
            <td><%= post.open ? "Open" : "Closed" %></td>
          </tr>
      <% end %>
  <% end %>
  </tbody>
</table>

<script type="text/javascript">

    $(document).ready(function () {
        $("[id^=postResult_]").each(function (key) {
            $('#' + this.id).click(function (e) {
                e.preventDefault();
                var post_id = this.id.split('_')[1];
                document.location.href = "/posts/" + post_id;
            });
        });

        $("table").tablesorter(); 
    });

</script>

